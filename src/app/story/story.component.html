<div class="story-bg">
  <canvas id="letterRain" class="canvas-bg"></canvas>
  <canvas id="heartRain" class="canvas-bg"></canvas>
  <canvas id="zigzagRain" class="canvas-bg"></canvas>
  <div class="story-content">
    <h1 class="birthday-title">üéÇ Happy Birthday! üéâ</h1>
    <div class="birthday-message-wrapper">
      <div class="birthday-message-deco left">üéÄ</div>
      <p class="birthday-message">
        ‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏¥‡πÄ‡∏®‡∏© ‡πÄ‡∏ï‡πá‡∏°‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡πÅ‡∏•‡∏∞‡∏£‡∏≠‡∏¢‡∏¢‡∏¥‡πâ‡∏°<br />
        ‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏ô‡∏∞‡∏Ñ‡∏∞ üíñ
      </p>
      <div class="birthday-message-deco right">üéÄ</div>
    </div>

    <!-- ‡πÅ‡∏¢‡∏Å Gallery ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û -->
    <div class="gallery-section">
      <h2 class="gallery-title">‡∏†‡∏≤‡∏û‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥</h2>
      <div class="gallery-grid">
        <ng-container *ngFor="let item of gallery; let i = index">
          <div
            class="gallery-item"
            *ngIf="item.type === 'image'"
            (click)="openMedia(i)"
          >
            <img [src]="item.src" [alt]="item.alt" />
          </div>
        </ng-container>
      </div>
    </div>

    <!-- ‡πÅ‡∏¢‡∏Å Gallery ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ -->
    <div class="gallery-section">
      <h2 class="gallery-title">‡∏ß‡∏µ‡∏î‡∏µ‡πÇ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥</h2>
      <div class="gallery-grid video-gallery-grid">
        <ng-container *ngFor="let item of gallery; let i = index">
          <div
            class="gallery-item"
            *ngIf="item.type === 'video'"
            (click)="openMedia(i)"
          >
            <div class="video-thumb">
              <video [src]="item.src" muted></video>
              <span class="play-icon">
                <svg width="36" height="36" viewBox="0 0 36 36" fill="none">
                  <circle cx="18" cy="18" r="18" fill="rgba(0,0,0,0.45)" />
                  <polygon points="14,11 27,18 14,25" fill="#fff" />
                </svg>
              </span>
            </div>
          </div>
        </ng-container>
      </div>
    </div>

    <div class="story-text">
      <div class="balloon-note">
        <div class="balloon-string"></div>
        <div class="balloon-paper">
          <div class="memory-frame">
            <p>
              ‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡πÜ ‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤ ‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏î‡∏µ‡πÜ ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡∏°‡∏≤‡∏¢<br />
              ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏Ç‡πâ‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡πÄ‡∏™‡∏°‡∏≠ ‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏™‡∏∏‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏∏‡∏Å‡∏Ç‡πå<br />
              ‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏õ‡∏µ‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏µ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡πÄ‡∏ò‡∏≠ ‡∏°‡∏µ‡πÅ‡∏ï‡πà‡∏£‡∏≠‡∏¢‡∏¢‡∏¥‡πâ‡∏°‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏´‡∏±‡∏ß‡πÄ‡∏£‡∏≤‡∏∞‡∏ô‡∏∞‡∏Ñ‡∏∞
              üíñ
            </p>
            <div class="memory-divider"></div>
            <p class="memory-love">
              <span class="story-highlight">‡∏£‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡πÇ‡∏•‡∏Å ü•∞</span>
            </p>
          </div>
        </div>
        <div class="balloon"></div>
      </div>
    </div>
    <hr class="story-divider" />
    <div class="story-footer">
      <span style="font-size: 1.3rem; color: #ffd966">‚≠ê</span>
      <span>‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏±‡∏ô</span>
      <span style="font-size: 1.3rem; color: #ffd966">‚≠ê</span>
    </div>
    <button class="story-btn" routerLink="/">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
  </div>
  <div class="modal-backdrop" *ngIf="modalOpen" (click)="closeMedia()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <button class="modal-close" (click)="closeMedia()">√ó</button>
      <button class="modal-nav left" (click)="prevMedia($event)">‚Äπ</button>
      <ng-container *ngIf="gallery[modalIndex].type === 'image'">
        <img [src]="gallery[modalIndex].src" [alt]="gallery[modalIndex].alt" />
      </ng-container>
      <ng-container *ngIf="gallery[modalIndex].type === 'video'">
        <video [src]="gallery[modalIndex].src" controls autoplay></video>
      </ng-container>
      <button class="modal-nav right" (click)="nextMedia($event)">‚Ä∫</button>
      <div class="modal-caption">{{ gallery[modalIndex].alt }}</div>
    </div>
  </div>
</div>
